<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>forEach, filter, map, reduce - KrisYu's Playground!</title><link href="https://fonts.googleapis.com/css?family=Lato:900|Work+Sans" rel="stylesheet"><link rel="stylesheet" href="http://krisyu.github.io//css/main.css"><title>forEach, filter, map, reduce - KrisYu’s Playground!</title><meta property="og:title" content="forEach, filter, map, reduce" /><meta name="description" content="感觉这四个函数是一霸，非常厉害" /><meta property="og:description" content="感觉这四个函数是一霸，非常厉害" /><link rel="canonical" href="http://localhost:4000/http://krisyu.github.io//2016/12/30/foreach-filter-map-reduce.html" /><meta property="og:url" content="http://localhost:4000/http://krisyu.github.io//2016/12/30/foreach-filter-map-reduce.html" /><meta property="og:site_name" content="KrisYu’s Playground!" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2016-12-30T00:00:00-06:00" /><script type="application/ld+json"> {"@context": "http://schema.org", "@type": "BlogPosting", "headline": "forEach, filter, map, reduce", "datePublished": "2016-12-30T00:00:00-06:00", "description": "感觉这四个函数是一霸，非常厉害", "url": "http://localhost:4000/http://krisyu.github.io//2016/12/30/foreach-filter-map-reduce.html"}</script></head><body style="background-color: rgb(255, 255, 255)"><script src="http://krisyu.github.io//js/theme.min.js"></script><header> <a href="http://krisyu.github.io//"><div class="home"></div></a></header><h1 class="post-headline">forEach, filter, map, reduce</h1><div class="meta"><span>December 30, 2016</span></div><p>感觉这四个函数是一霸，非常厉害</p><h3 id="foreach">forEach</h3><p>本体</p><div class="highlighter-rouge"><pre class="highlight"><code>function forEach(array, action) {
  for (var i = 0; i &lt; array.length; i++) {
    action(array[i]);
  }
}

forEach(["Wampeter", "Foma", "Granfalloon"], console.log);
</code></pre></div><p>实际js中写法：</p><div class="highlighter-rouge"><pre class="highlight"><code>// the real way of writing in js
var numbers = [1,2,3,4,5], sum = 0;
numbers.forEach(function(number){
  sum += number;
});

console.log(sum);

</code></pre></div><p>因为这四个都是Array的method。 Python中没有对应的for Each，就只能用本体写法^_^</p><h3 id="filter">filter</h3><p>本体</p><div class="highlighter-rouge"><pre class="highlight"><code>function filter(array, test) {
  var passed = [];
  for (var i = 0; i &lt; array.length; i++) {
    if (test(array[i]))
      passed.push(array[i]);
  }
  return passed;
}
</code></pre></div><p>js写法：</p><div class="highlighter-rouge"><pre class="highlight"><code>var numbers = [1,2,3,4,5];

function isEven(value) {
  return value % 2 == 0;
}
console.log(numbers.filter(isEven));

// 这样也ok
numbers.filter(function(value){
  return value % 2 == 0;
});
</code></pre></div><p>python 用法，写法，比如这个例子：</p><p>Replace all non-alphanumeric characters in a string</p><div class="highlighter-rouge"><pre class="highlight"><code>s = 'abcdjiyiuy**&amp;&amp;#$%^&amp;*(1234567890'
s = filter(str.isalnum, s)
s → 'abcdjiyiuy1234567890'
</code></pre></div><p>前面放一个函数来filter</p><p>发现了这篇文章和这本小书<a href="http://book.pythontips.com/en/latest/map_filter.html">http://book.pythontips.com/en/latest/map_filter.html</a></p><h3 id="map">map</h3><p>本体</p><blockquote><p>The map() method creates a new array with the results of calling a provided function on every element in this array.</p></blockquote><p>forEach强调对于array里面的每个element做action,而map则是return一个新的array.</p><div class="highlighter-rouge"><pre class="highlight"><code>function map(array, transform){
  var mapped = [];
  for (var i = 0; i &lt; array.length; i++) 
    mapped.push(transform(array[i]));
  return mappped;
}
</code></pre></div><p>js例子</p><div class="highlighter-rouge"><pre class="highlight"><code>var numbers = [1, 5, 10, 15];

var roots = numbers.map(function(x){
  return x * 2;
});

roots
→ [2, 10, 20, 30] 
</code></pre></div><p>例子来自于<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference</a></p><h3 id="reduce">reduce</h3><p>本体</p><div class="highlighter-rouge"><pre class="highlight"><code>function reduce(array, combine, start) {
  var current = start;
  for (var i = 0; i &lt; array.length; i++)
    current = combine(current, array[i]);
  return current;
}

console.log(reduce([1, 2, 3, 4], function(a, b) {
  return a + b;
}, 0));
</code></pre></div><p>js写法</p><div class="highlighter-rouge"><pre class="highlight"><code>var sum = [0, 1, 2, 3].reduce(function(a, b) {
  return a + b;
}, 0);
</code></pre></div><p>原来reduce还有这么棒的一个地方：</p><blockquote><p>The standard array method reduce, which of course corresponds to this function, has an added convenience. If your array contains at least one element, you are allowed to leave off the start argument. The method will take the first element of the array as its start value and start reducing at the second element.</p></blockquote><h3 id="结合起来的力量">结合起来的力量</h3><p>把这四个结合起来用的例子，注意这里js的<code class="highlighter-rouge">+</code>并不是一个function，不是value，所以只得自己定义一个plus函数。</p><p>但是总得看起来还是非常便利。</p><div class="highlighter-rouge"><pre class="highlight"><code>function average(array) {
  function plus(a, b) { return a + b;}
  return array.reduce(plus) / array.length;
}

function age(p){ return p.died - p.born; }
function male(p) { return p.sex == 'm'; }
function female(p) { return p.sex == 'f';}


console.log(average(ancestry.filter(male).map(age)));
console.log(average(ancestry.filter(female).map(age)));
</code></pre></div><div id="disqus_thread"></div><script defer> (function() { var d = document, s = d.createElement('script'); s.src = '//webjeda-demo.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><footer><div class="links"> <a href="http://krisyu.github.io//about/">About</a> <a href="http://krisyu.github.io//contact/">Contact</a></div><div class="theme" onclick="theme()" style=" background-image: url(http://krisyu.github.io//images/theme.svg)"></div></footer><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-83979019-1', 'auto'); ga('send', 'pageview');</script></body></html>
